{"version":3,"sources":["components/MessageForm.jsx","components/MyMessage.jsx","components/TheirMessage.jsx","components/ChatFeed.jsx","components/LoginForm.jsx","App.js","index.js"],"names":["MessageForm","props","useState","value","setValue","chatId","creds","handleSubmit","event","preventDefault","text","trim","length","sendMessage","className","onSubmit","placeholder","onChange","target","isTyping","htmlFor","PictureOutlined","type","multiple","id","style","display","files","SendOutlined","MyMessage","message","attachments","src","file","alt","float","marginRight","color","backgroundColor","TheirMessage","lastMessage","isFirstMessage","sender","username","backgroundImage","avatar","marginLeft","ChatFeed","chats","activeChat","userName","messages","chat","renderReadReceipts","isMyMessage","people","map","person","index","last_read","marginTop","title","keys","Object","key","lastMessageKey","console","log","width","renderMessages","height","LoginForm","setUsername","password","setPassword","error","setError","e","a","authObject","axios","get","headers","localStorage","setItem","window","location","reload","required","align","App","getItem","projectID","userSecret","renderChatFeed","chatAppProps","Component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.06d58f00.chunk.js","sourcesContent":["import {useState} from 'react';\r\nimport { sendMessage , isTyping } from 'react-chat-engine';\r\nimport {SendOutlined , PictureOutlined} from '@ant-design/icons';\r\n\r\nconst MessageForm = (props) => {\r\n\tconst [value , setValue] = useState('');\r\n\tconst { chatId , creds } = props;\r\n\t\r\n\tconst handleSubmit = (event) => {\r\n\t\tevent.preventDefault();\r\n\r\n\t\tconst text = value.trim();\r\n\t\tif(text.length > 0){\r\n\t\t\tsendMessage(creds , chatId , {text});\r\n\t\t\tsetValue('');\r\n\t\t}\r\n\t}\r\n\t\r\n\tconst handleChange = (event) => {\r\n\t\tsetValue(event.target.value);\r\n\t\tisTyping(props , chatId);\r\n\t}\r\n\tconst handleUpload = (event) => {\r\n\t\tsendMessage(creds , chatId , {files : event.target.files , text : ''});\r\n\t}\r\n\treturn (\r\n\t\t<form className=\"message-form\" onSubmit = {handleSubmit}>\r\n\t\t\t<input \r\n\t\t\t\tclassName=\"message-input\"\r\n\t\t\t\tplaceholder = \"Send a message ...\"\r\n\t\t\t\tvalue = {value}\r\n\t\t\t\tonChange = {handleChange}\r\n\t\t\t\tonSubmit = {handleSubmit}\r\n\t\t\t/>\r\n\t\t\t<label htmlFor=\"upload-button\">\r\n\t\t\t\t<span className=\"image-button\">\r\n\t\t\t\t\t<PictureOutlined className=\"picture-icon\" />\r\n\t\t\t\t</span>\r\n\t\t\t</label>\r\n\t\t\t<input \r\n\t\t\t\ttype=\"file\"\r\n\t\t\t\tmultiple = {false}\r\n\t\t\t\tid = \"upload-button\"\r\n\t\t\t\tstyle = {{display : 'none' }}\r\n\t\t\t\tonChange = {handleUpload}\r\n\t\t\t/>\r\n\t\t\t<button type=\"submit\" className=\"send-button\">\r\n\t\t\t\t<SendOutlined className=\"send-icon\"/>\r\n\t\t\t</button>\r\n\t\t</form>\r\n\t)\r\n}\r\n\r\nexport default MessageForm","const MyMessage = ({message}) => {\r\n\tif(message?.attachments?.length > 0){\r\n\t\treturn (\r\n\t\t\t<img \r\n\t\t\t\tsrc = {message.attachments[0].file}\r\n\t\t\t\talt = \"message-attachment\"\r\n\t\t\t\tclassName = 'message-image'\r\n\t\t\t\tstyle = {{float : 'right'}}\r\n\t\t\t/>\r\n\t\t)\r\n\t}\r\n\treturn (\r\n\t\t<div className=\"message\" style={{float : 'right' , marginRight : '18px' , color : 'white' , backgroundColor : '#3B2A50'}}>\r\n\t\t\t{message.text}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default MyMessage","const TheirMessage = ({lastMessage , message}) => {\r\n\tconst isFirstMessage = !lastMessage || lastMessage.sender.username !== message.sender.username;\r\n\treturn (\r\n\t\t<div className = 'message-row'>\r\n\t\t\t{isFirstMessage && (\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName = \"message-avatar\"\r\n\t\t\t\t\tstyle = {{backgroundImage : `url(${message?.sender?.avatar})`}}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\t\t\t{\r\n\r\n\t\t\t\tmessage?.attachments?.length > 0 ?\r\n\t\t\t\t(\r\n\t\t\t\t\t<img \r\n\t\t\t\t\t\tsrc = {message.attachments[0].file}\r\n\t\t\t\t\t\talt = \"message-attachment\"\r\n\t\t\t\t\t\tclassName = 'message-image'\r\n\t\t\t\t\t\tstyle = {{marginLeft : isFirstMessage ? '4px' : '48px'}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)\r\n\t\t\t\t:\r\n\t\t\t\t(\r\n\t\t\t\t\t<div className=\"message\" style={{float : 'left' ,backgroundColor : '#CABCDC' , marginLeft : isFirstMessage ? '4px' : '48px'}}>\r\n\t\t\t\t\t\t{message.text}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default TheirMessage","import React from 'react';\r\nimport MessageForm from './MessageForm';\r\nimport MyMessage from './MyMessage';\r\nimport TheirMessage from './TheirMessage';\r\n\r\nfunction ChatFeed(props) {\r\n    const {chats , activeChat , userName , messages} = props;\r\n    const chat = chats && chats[activeChat];\r\n\r\n    const renderReadReceipts = (message , isMyMessage) => {\r\n        return chat.people.map((person , index) => person.last_read === message.id && (\r\n            <div \r\n                key = {`read_${index}`}\r\n                className = \"read-receipt\"\r\n                style = {{\r\n                    float : isMyMessage ? 'right' : 'left',\r\n                    backgroundImage : `url(${person?.person?.avatar})`,\r\n                    marginTop : '10px'\r\n                }}\r\n            />\r\n        ))\r\n    }\r\n\r\n    const renderMessages = () => {\r\n        const keys = Object.keys(messages);\r\n        // console.log(keys);\r\n        return keys.map( (key , index) => {\r\n            const message = messages[key];\r\n            const lastMessageKey = index === 0 ? null : keys[index - 1];\r\n            const isMyMessage = userName === message.sender.username;\r\n            console.log(message);\r\n            return (\r\n                <div key={`msg_${index}`} style={{width : '100%'}}>\r\n                    <div className=\"message-block\">\r\n                        {isMyMessage ? \r\n                            <MyMessage message={message}/> : \r\n                            <TheirMessage message={message} lastMessage = {messages[lastMessageKey]} />}\r\n                    </div>\r\n                    <div className=\"read-receipts\"\r\n                        style={{marginRight : isMyMessage ? '18px' : '0px' , marginLeft : isMyMessage ? '0px' : '68px'}}>\r\n                            {renderReadReceipts(message , isMyMessage)}\r\n                    </div>\r\n                </div>\r\n\r\n            )\r\n        } )\r\n    }\r\n    if(!chat) return 'loading...'\r\n    return (\r\n        <div className=\"chat-feed\">\r\n            <div className=\"chat-title-container\">\r\n                <div className=\"chat-title\">{chat.title}</div>\r\n                <div className=\"chat-subtitle\">\r\n                    {chat.people.map((person) => `${person.person.username}`)}\r\n                </div>\r\n            </div>\r\n            {renderMessages()}\r\n            <div style={{height:'100px'}} />\r\n            <div className=\"message-form-container\">\r\n                <MessageForm {...props} chatId = {activeChat} />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ChatFeed;","import {useState} from 'react';\r\nimport axios from 'axios';\r\n\r\nconst LoginForm = () => {\r\n\tconst [username , setUsername] = useState('');\r\n\tconst [password , setPassword] = useState('');\r\n\tconst [error , setError] = useState('');\r\n\r\n\tconst handleSubmit = async (e) => {\r\n\t\te.preventDefault();\r\n\t\tconst authObject = {\r\n\t\t\t'Project-ID' : \"594a411a-00e1-4b9d-bcc0-bde1173fd953\",\r\n\t\t\t'User-Name' : username ,\r\n\t\t\t'User-Secret' : password\r\n\t\t}\r\n\t\ttry{\r\n\t\t\tawait axios.get('https://api.chatengine.io/chats' , {headers : authObject});\r\n\t\t\tlocalStorage.setItem('username' , username);\r\n\t\t\tlocalStorage.setItem('password' , password);\r\n\t\t\twindow.location.reload();\r\n\t\t}\r\n\t\tcatch(error){\r\n\t\t\tsetError(\"Oops , incorrect credentials!!\");\r\n\t\t}\r\n\t}\r\n\r\n\treturn(\r\n\t\t<div className = \"wrapper\">\r\n\t\t\t<div className=\"form\">\r\n\t\t\t\t<h1 className=\"title\">Chat Application</h1>\r\n\t\t\t\t<form onSubmit={handleSubmit}>\r\n\t\t\t\t\t<input type=\"text\" value={username} onChange = {(e) => setUsername(e.target.value)} \r\n\t\t\t\t\tclassName=\"input\" placeholder=\"User Name\" required/>\r\n\t\t\t\t\t<input type=\"text\" value={password} onChange = {(e) => setPassword(e.target.value)} \r\n\t\t\t\t\tclassName=\"input\" placeholder=\"password\" required/>\r\n\t\t\t\t\t<div align=\"center\">\r\n\t\t\t\t\t\t<button type=\"submit\" className=\"button\">\r\n\t\t\t\t\t\t\t<span>Start Chatting...</span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<h2 className=\"error\">{error}</h2>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default LoginForm;","import React, { Component } from 'react';\nimport './App.css';\nimport {ChatEngine} from 'react-chat-engine';\nimport ChatFeed  from './components/ChatFeed';\nimport LoginForm from \"./components/LoginForm\";\n\nclass App extends Component {\n    render() {\n        if(!localStorage.getItem('username')) return <LoginForm />;\n        return (\n            <div>\n                <ChatEngine \n                    height = \"100vh\"\n                    projectID = \"594a411a-00e1-4b9d-bcc0-bde1173fd953\"\n                    userName = {localStorage.getItem('username')}\n                    userSecret = {localStorage.getItem('password')}\n                    renderChatFeed = {(chatAppProps) => <ChatFeed {...chatAppProps}/>}\n                />\n            </div>\n        )\n    }\n}\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App/>, document.getElementById('root'));"],"sourceRoot":""}